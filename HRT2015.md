# O(1) query time, O(n) space reachability for planar graphs

This paper: reduce the case from acyclic single-source graph to an acyclic s-t graph (Section 3), and reduce the case of acyclic in-out graph to an acyclic single-source graph (Section 4).

## Section 3: Acyclic single-source graph â†’ s-t graph
In this section, we create a partition of the vertices of $G$ in the form of truncated $st$-graphs first. Then we use this decomposition to reduce reachability queries into the $st$-graph case.

### Part 1: st-decompositions
Create the *st-decomposition* of an acyclic single-source planar graph $G=(V,E)$, which is a rooted tree with nodes that correspond to truncated $st$-graphs (where we can add sources/sinks to obtain an $st$-graph without violating planarity). This will allow us to reduce to the $st$ case.

The *st-decomposition* is obtained by recursively choosing faces of $G$ wisely and letting all the vertices that can reach vertices on this face $f$ belong to this *st-decomposition* node. Then we partition all remaining vertices amongst the descendants of this *st-decomposition* node within the rooted tree. An *st-decomposition* looks something like below.

![IMG_01A82F88F64F-1](https://user-images.githubusercontent.com/69584282/198895525-8593b6d7-0160-45a0-a45a-fd0e4f8942dd.jpeg)

All vertices are represented in exactly one st-decomp. node (a frame), and we select truncated st-graphs maximally so once a path crosses a frame, it does not exit the frame.
We select faces of $G$ recursively such that the *st-decomposition* has height $O(\log{n})$ and each frame has an alternation number of 2 (this is called a good st-decomposition).


**For given pair of vertices $u,v$, $u$ reaches $v$ in $G$ iff $u$ lies in a component of *st-decomposition* that is ancestral to $v$'s component.**

The reason for this is we know that the alternation number of any frame in an *st-decomposition* is at most 4, so between the frames of $u,v$ respectively there can be at most 4 best possible vertices that could reach $v$ within $u$ and $v$'s frame. So we use this level-ancestry system to find these candidate best vertices in the two frames.
